{% extends "base.html" %}
{% load bootstrap5 %}
{% block content %}
    <h1>Available Artists</h1>

    <h2>Submit Artist</h2>

    <form method="post" action="{% url 'get_artist_choices' %}" hx-post="{% url 'get_artist_choices' %}" hx-target="#artistChoicesContainer">
        <br>
        {% csrf_token %}
        {{ spotify_search_form.as_p }}

        <select id="artistChoicesContainer" name="artistChoicesContainer">
          <!-- Dynamic artist choices will be loaded here -->
        </select>
        <button type="submit">Search Artist</button>
    </form>

    <table class="table">
    <thead>
        <tr>
          <th>Artist</th>
          <th>Image</th>
          <th>Popularity</th>
        </tr>
    </thead>
    <tbody>
    {% for artist in allartists %}
    <tr>
        <td><a href="{% url 'artist_summary' artist.spotify_artist %}">
        {{ artist.spotify_artist}}
        </a></td>
        <br>
        <td><img src="{{ artist.spotify_image}}" alt="Avatar"></td>
        <td>{{ artist.spotify_popularity }}</td>
    </tr>
    {% endfor %}
</tbody>
{% endblock %}
